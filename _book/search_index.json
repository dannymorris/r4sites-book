[["google-analytics.html", "Chapter 8 Analyzing traffic with Google Analytics 8.1 How it works 8.2 Setting up Google Analytics 8.3 Analyzing traffic using googleAnalyticsR", " Chapter 8 Analyzing traffic with Google Analytics This chapter shows you how to embed Google Analytics on your website to capture traffic from users. Additionally, this chapter will provide some guidance on how to analyze traffic using the R package googleAnalyticsR. If you haven’t already, complete the following prerequisites: Create your blogdown website and (optionally) add some content Deploy your site on Netlify Sign up for Google Analytics 8.1 How it works Once you sign up for Google Analytics, the main objectives are to create an Account and a Property for your website domain name, then obtain a Tracking ID. This tracking code will go in the config.yaml file on your website, which in turn will instruct Google Analytics to collect the data on user traffic to your website. 8.2 Setting up Google Analytics Follow these steps to integrate Google Analytics into your website: Sign in to Google Analytics and navigate to Admin &gt; Create Account. Example Under Account setup, provide an appropriate name (e.g. personal-website) and configure the Account Data Sharing Settings to your liking. The defaults should be fine. Click “Next.” Under Property setup, provide an appropriate name (e.g. personal-website-property). Under Property setup, click on “Show advanced options” to create a Universal Analytics property. For the Website URL, provide the URL to your website. Click “Next.” Example Under About you business, configure the settings to your liking. Click “Next” and accept the terms of service. Locate the Tracking ID by returning back to the Admin console and selecting the Account and Property that were created in the previous steps. Important: Make sure you locate the Universal Analytics property that reads property name (UA-XXXXXXX-X) and not the GA4 property. Under Property, click on Tracking Info &gt; Tracking Code (example). Copy the Tracking ID, which should appear in the form of UA-XXXXXXXXX-1. Example Return to your RStudio Project where you are developing your website. Open the file config.yaml in the main directory and locate the googleAnalytics: parameter. Depending on the theme, this parameter may be written or spelled slightly differently. Paste your Google Analytics Tracking ID here, e.g. googleAnalytics: 'UA-XXXXXXXXX-1'. Example. Push your changes to your GitHub repository to complete the Google Analytics integration. 8.3 Analyzing traffic using googleAnalyticsR googleAnalyicsR is an R package for analyzing Google Analytics data stemming from traffic to your website. 8.3.1 Install the package install.packages(&quot;googleAnalyticsR&quot;, dependencies = TRUE) 8.3.2 Authenticate your Google Analytics account library(googleAnalyticsR) ga_auth(email=&quot;usc00@hotmail.com&quot;) 8.3.3 Load packages for data analytics library(dplyr) library(plotly) library(DT) library(leaflet) 8.3.4 List your Google Analytics accounts and properties ## get your accounts ga_accounts &lt;- ga_account_list() ga_accounts 8.3.5 Obtain viewId associated with your website view_id &lt;- ga_accounts %&gt;% filter(accountName == &quot;abndistro&quot;, webPropertyName == &quot;Abnormal Distributions&quot;) %&gt;% pull(viewId) 8.3.6 Daily count of website users daily_users &lt;- google_analytics( viewId = view_id, date_range = c(&quot;2019-01-01&quot;, &quot;2020-12-31&quot;), metrics = &quot;users&quot;, dimensions = &quot;date&quot; ) %&gt;% as_tibble() plot_ly( data = daily_users, x = ~date, y = ~users, mode = &quot;lines&quot; ) %&gt;% layout(title = &quot;Daily count of users who engaged with Abnormal Distributions&quot;) 8.3.7 Users by device type users_by_device_type &lt;- google_analytics( viewId = view_id, date_range = c(&quot;2019-01-01&quot;, &quot;2020-12-31&quot;), metrics = &quot;users&quot;, dimensions = &quot;deviceCategory&quot; ) %&gt;% as_tibble() plot_ly( data = users_by_device_type, x = ~deviceCategory, y = ~users, type = &quot;bar&quot; ) %&gt;% layout(title = &quot;Users by device type&quot;) 8.3.8 Page views by page page_views &lt;- google_analytics( viewId = view_id, date_range = c(&quot;2019-01-01&quot;, &quot;2020-12-31&quot;), metrics = &quot;pageviews&quot;, dimensions = &quot;pageTitle&quot; ) %&gt;% as_tibble() page_views %&gt;% arrange(desc(pageviews)) %&gt;% DT::datatable() 8.3.9 Users by location users_location &lt;- google_analytics( viewId = view_id, date_range = c(&quot;2019-01-01&quot;, &quot;2020-12-31&quot;), metrics = &quot;users&quot;, dimensions = c(&quot;latitude&quot;, &quot;longitude&quot;), anti_sample = T ) %&gt;% as_tibble() %&gt;% mutate_at(vars(latitude, longitude), list(as.numeric)) users_location %&gt;% leaflet() %&gt;% addTiles() %&gt;% addCircleMarkers( lng = ~longitude, lat = ~latitude, radius = ~log(users), stroke = FALSE, fillOpacity = 0.5 ) "]]
