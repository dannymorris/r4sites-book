<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Analyzing traffic with Google Analytics | Create, Publish, and Analyze Personal Websites Using R and RStudio</title>
  <meta name="description" content="A step-by-step guide for creating, publishing, and analyzing your personal website using R, RStudio, and other open source technologies including GitHub, Netlify, and Google Analytics." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Analyzing traffic with Google Analytics | Create, Publish, and Analyze Personal Websites Using R and RStudio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A step-by-step guide for creating, publishing, and analyzing your personal website using R, RStudio, and other open source technologies including GitHub, Netlify, and Google Analytics." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Analyzing traffic with Google Analytics | Create, Publish, and Analyze Personal Websites Using R and RStudio" />
  
  <meta name="twitter:description" content="A step-by-step guide for creating, publishing, and analyzing your personal website using R, RStudio, and other open source technologies including GitHub, Netlify, and Google Analytics." />
  

<meta name="author" content="Danny Morris" />


<meta name="date" content="2021-04-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="deploy.html"/>
<link rel="next" href="extras.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Create, Publish, and Analyze Personal Websites Using R and RStudio</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#about-this-book"><i class="fa fa-check"></i><b>1.1</b> About this book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#target-audience"><i class="fa fa-check"></i><b>1.2</b> Target audience</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#hugo-blogdown-and-static-websites"><i class="fa fa-check"></i><b>1.3</b> Hugo, blogdown, and static websites</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#inspiring-website-examples"><i class="fa fa-check"></i><b>1.4</b> Inspiring website examples</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#websites-as-marketing-tools"><i class="fa fa-check"></i><b>1.5</b> Websites as marketing tools</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#faq"><i class="fa fa-check"></i><b>1.6</b> FAQ</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html"><i class="fa fa-check"></i><b>2</b> Complete end-to-end example</a>
<ul>
<li class="chapter" data-level="2.1" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#how-it-works"><i class="fa fa-check"></i><b>2.1</b> How it works</a></li>
<li class="chapter" data-level="2.2" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#install-software"><i class="fa fa-check"></i><b>2.2</b> Install software</a></li>
<li class="chapter" data-level="2.3" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#create-accounts"><i class="fa fa-check"></i><b>2.3</b> Create accounts</a></li>
<li class="chapter" data-level="2.4" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#create-new-blogdown"><i class="fa fa-check"></i><b>2.4</b> Generate a blogdown website</a></li>
<li class="chapter" data-level="2.5" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#push-the-website-to-github"><i class="fa fa-check"></i><b>2.5</b> Push the website to GitHub</a></li>
<li class="chapter" data-level="2.6" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#deploy-the-website-on-netlify"><i class="fa fa-check"></i><b>2.6</b> Deploy the website on Netlify</a></li>
<li class="chapter" data-level="2.7" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#set-up-google-analytics"><i class="fa fa-check"></i><b>2.7</b> Set up Google Analytics</a></li>
<li class="chapter" data-level="2.8" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#analyze-google-analytics-data"><i class="fa fa-check"></i><b>2.8</b> Analyze Google Analytics data</a></li>
<li class="chapter" data-level="2.9" data-path="complete-end-to-end-example.html"><a href="complete-end-to-end-example.html#closing-thoughts"><i class="fa fa-check"></i><b>2.9</b> Closing thoughts</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="style.html"><a href="style.html"><i class="fa fa-check"></i><b>3</b> Choosing a Hugo theme</a>
<ul>
<li class="chapter" data-level="3.1" data-path="style.html"><a href="style.html#how-it-works-1"><i class="fa fa-check"></i><b>3.1</b> How it works</a></li>
<li class="chapter" data-level="3.2" data-path="style.html"><a href="style.html#the-9010-rule-for-themes"><i class="fa fa-check"></i><b>3.2</b> The 90/10 rule for themes</a></li>
<li class="chapter" data-level="3.3" data-path="style.html"><a href="style.html#create-site-with-theme"><i class="fa fa-check"></i><b>3.3</b> Generating websites from themes</a></li>
<li class="chapter" data-level="3.4" data-path="style.html"><a href="style.html#editing-your-theme"><i class="fa fa-check"></i><b>3.4</b> Editing your theme</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="generate.html"><a href="generate.html"><i class="fa fa-check"></i><b>4</b> Generating a blogdown website</a>
<ul>
<li class="chapter" data-level="4.1" data-path="generate.html"><a href="generate.html#how-it-works-2"><i class="fa fa-check"></i><b>4.1</b> How it works</a></li>
<li class="chapter" data-level="4.2" data-path="generate.html"><a href="generate.html#use-case"><i class="fa fa-check"></i><b>4.2</b> Use case</a></li>
<li class="chapter" data-level="4.3" data-path="generate.html"><a href="generate.html#generate-site"><i class="fa fa-check"></i><b>4.3</b> Generate your site in three steps</a></li>
<li class="chapter" data-level="4.4" data-path="generate.html"><a href="generate.html#serve-site"><i class="fa fa-check"></i><b>4.4</b> Serving the website locally</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="curate-features.html"><a href="curate-features.html"><i class="fa fa-check"></i><b>5</b> Curating the look, feel, and features</a>
<ul>
<li class="chapter" data-level="5.1" data-path="curate-features.html"><a href="curate-features.html#how-it-works-3"><i class="fa fa-check"></i><b>5.1</b> How it works</a></li>
<li class="chapter" data-level="5.2" data-path="curate-features.html"><a href="curate-features.html#tips-for-working-efficiently"><i class="fa fa-check"></i><b>5.2</b> Tips for working efficiently</a></li>
<li class="chapter" data-level="5.3" data-path="curate-features.html"><a href="curate-features.html#use-case-1"><i class="fa fa-check"></i><b>5.3</b> Use case</a></li>
<li class="chapter" data-level="5.4" data-path="curate-features.html"><a href="curate-features.html#title-and-description"><i class="fa fa-check"></i><b>5.4</b> Title and description</a></li>
<li class="chapter" data-level="5.5" data-path="curate-features.html"><a href="curate-features.html#logos-and-profile-images"><i class="fa fa-check"></i><b>5.5</b> Logos and profile images</a></li>
<li class="chapter" data-level="5.6" data-path="curate-features.html"><a href="curate-features.html#favicons"><i class="fa fa-check"></i><b>5.6</b> Favicons</a></li>
<li class="chapter" data-level="5.7" data-path="curate-features.html"><a href="curate-features.html#fonts"><i class="fa fa-check"></i><b>5.7</b> Fonts</a></li>
<li class="chapter" data-level="5.8" data-path="curate-features.html"><a href="curate-features.html#colors"><i class="fa fa-check"></i><b>5.8</b> Colors</a></li>
<li class="chapter" data-level="5.9" data-path="curate-features.html"><a href="curate-features.html#managing-pages-and-sections"><i class="fa fa-check"></i><b>5.9</b> Managing pages and sections</a></li>
<li class="chapter" data-level="5.10" data-path="curate-features.html"><a href="curate-features.html#contact-forms"><i class="fa fa-check"></i><b>5.10</b> Contact forms</a></li>
<li class="chapter" data-level="5.11" data-path="curate-features.html"><a href="curate-features.html#foreign-languages"><i class="fa fa-check"></i><b>5.11</b> Foreign languages</a></li>
<li class="chapter" data-level="5.12" data-path="curate-features.html"><a href="curate-features.html#social-media-links"><i class="fa fa-check"></i><b>5.12</b> Social media links</a></li>
<li class="chapter" data-level="5.13" data-path="curate-features.html"><a href="curate-features.html#closing-thoughts-on-themes"><i class="fa fa-check"></i><b>5.13</b> Closing thoughts on themes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="content.html"><a href="content.html"><i class="fa fa-check"></i><b>6</b> Authoring content</a>
<ul>
<li class="chapter" data-level="6.1" data-path="content.html"><a href="content.html#creating-posts"><i class="fa fa-check"></i><b>6.1</b> Creating posts</a></li>
<li class="chapter" data-level="6.2" data-path="content.html"><a href="content.html#example-r-markdown-post"><i class="fa fa-check"></i><b>6.2</b> Example R Markdown post</a></li>
<li class="chapter" data-level="6.3" data-path="content.html"><a href="content.html#example-markdown-post"><i class="fa fa-check"></i><b>6.3</b> Example Markdown post</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="deploy.html"><a href="deploy.html"><i class="fa fa-check"></i><b>7</b> Deploying on Netlify</a>
<ul>
<li class="chapter" data-level="7.1" data-path="deploy.html"><a href="deploy.html#how-it-works-4"><i class="fa fa-check"></i><b>7.1</b> How it works</a></li>
<li class="chapter" data-level="7.2" data-path="deploy.html"><a href="deploy.html#upload-website-files-to-github"><i class="fa fa-check"></i><b>7.2</b> Upload website files to GitHub</a></li>
<li class="chapter" data-level="7.3" data-path="deploy.html"><a href="deploy.html#configure-netlify-for-deployment"><i class="fa fa-check"></i><b>7.3</b> Configure Netlify for deployment</a></li>
<li class="chapter" data-level="7.4" data-path="deploy.html"><a href="deploy.html#using-a-custom-domain-name"><i class="fa fa-check"></i><b>7.4</b> Using a custom domain name</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="google-analytics.html"><a href="google-analytics.html"><i class="fa fa-check"></i><b>8</b> Analyzing traffic with Google Analytics</a>
<ul>
<li class="chapter" data-level="8.1" data-path="google-analytics.html"><a href="google-analytics.html#how-it-works-5"><i class="fa fa-check"></i><b>8.1</b> How it works</a></li>
<li class="chapter" data-level="8.2" data-path="google-analytics.html"><a href="google-analytics.html#setting-up-google-analytics"><i class="fa fa-check"></i><b>8.2</b> Setting up Google Analytics</a></li>
<li class="chapter" data-level="8.3" data-path="google-analytics.html"><a href="google-analytics.html#analyzing-traffic-using-googleanalyticsr"><i class="fa fa-check"></i><b>8.3</b> Analyzing traffic using googleAnalyticsR</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="extras.html"><a href="extras.html"><i class="fa fa-check"></i><b>9</b> Extras</a>
<ul>
<li class="chapter" data-level="9.1" data-path="extras.html"><a href="extras.html#marketing-your-website"><i class="fa fa-check"></i><b>9.1</b> Marketing your website</a></li>
<li class="chapter" data-level="9.2" data-path="extras.html"><a href="extras.html#search-engine-optimization"><i class="fa fa-check"></i><b>9.2</b> Search engine optimization</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Create, Publish, and Analyze Personal Websites Using R and RStudio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="google-analytics" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Analyzing traffic with Google Analytics</h1>
<p>This chapter shows you how to embed Google Analytics on your website to capture traffic from users. Additionally, this chapter will provide some guidance on how to analyze traffic using the R package <a href="https://code.markedmondson.me/googleAnalyticsR/">googleAnalyticsR</a>.</p>
<p>If you haven’t already, complete the following prerequisites:</p>
<ul>
<li><a href="style.html#create-site-with-theme">Create your blogdown website</a> and (optionally) <a href="content.html#content">add some content</a></li>
<li><a href="deploy.html#deploy">Deploy your site on Netlify</a></li>
<li><a href="complete-end-to-end-example.html#create-accounts">Sign up for Google Analytics</a></li>
</ul>
<div id="how-it-works-5" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> How it works</h2>
<p>Once you sign up for Google Analytics, the main objectives are to create an Account and a Property for your website domain name, then obtain a Tracking ID. This tracking code will go in the <code>config.yaml</code> file on your website, which in turn will instruct Google Analytics to collect the data on user traffic to your website.</p>
</div>
<div id="setting-up-google-analytics" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Setting up Google Analytics</h2>
<p>Follow these steps to integrate Google Analytics into your website:</p>
<ol style="list-style-type: decimal">
<li><p>Sign in to Google Analytics and navigate to Admin &gt; Create Account. <a href="https://i.imgur.com/QRTa07k.png">Example</a></p></li>
<li><p>Under Account setup, provide an appropriate name (e.g. personal-website) and configure the Account Data Sharing Settings to your liking. The defaults should be fine. Click “Next.”</p></li>
<li><p>Under Property setup, provide an appropriate name (e.g. personal-website-property).</p></li>
<li><p>Under Property setup, click on “Show advanced options” to create a Universal Analytics property. For the Website URL, provide the URL to your website. Click “Next.” <a href="https://i.imgur.com/0jffYnF.png">Example</a></p></li>
<li><p>Under About you business, configure the settings to your liking. Click “Next” and accept the terms of service.</p></li>
<li><p>Locate the Tracking ID by returning back to the Admin console and selecting the Account and Property that were created in the previous steps. <strong>Important:</strong> Make sure you locate the Universal Analytics property that reads <code>property name (UA-XXXXXXX-X)</code> and not the GA4 property. Under Property, click on Tracking Info &gt; Tracking Code (<a href="https://i.imgur.com/GtiKfhq.png">example</a>). Copy the Tracking ID, which should appear in the form of UA-XXXXXXXXX-1. <a href="https://i.imgur.com/qcyaVBD.png">Example</a></p></li>
<li><p>Return to your RStudio Project where you are developing your website. Open the file <code>config.yaml</code> in the main directory and locate the <code>googleAnalytics:</code> parameter. Depending on the theme, this parameter may be written or spelled slightly differently. Paste your Google Analytics Tracking ID here, e.g. <code>googleAnalytics: 'UA-XXXXXXXXX-1'</code>. <a href="https://i.imgur.com/xgN24ah.png">Example</a>.</p></li>
<li><p>Push your changes to your GitHub repository to complete the Google Analytics integration.</p></li>
</ol>
</div>
<div id="analyzing-traffic-using-googleanalyticsr" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Analyzing traffic using googleAnalyticsR</h2>
<p><a href="https://code.markedmondson.me/googleAnalyticsR/">googleAnalyicsR</a> is an R package for analyzing Google Analytics data stemming from traffic to your website.</p>
<div id="install-the-package" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Install the package</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="google-analytics.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;googleAnalyticsR&quot;</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="authenticate-your-google-analytics-account" class="section level3" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Authenticate your Google Analytics account</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="google-analytics.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(googleAnalyticsR)</span>
<span id="cb6-2"><a href="google-analytics.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="google-analytics.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ga_auth</span>(<span class="at">email=</span><span class="st">&quot;usc00@hotmail.com&quot;</span>)</span></code></pre></div>
</div>
<div id="load-packages-for-data-analytics" class="section level3" number="8.3.3">
<h3><span class="header-section-number">8.3.3</span> Load packages for data analytics</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="google-analytics.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-2"><a href="google-analytics.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb7-3"><a href="google-analytics.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb7-4"><a href="google-analytics.html#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span></code></pre></div>
</div>
<div id="list-your-google-analytics-accounts-and-properties" class="section level3" number="8.3.4">
<h3><span class="header-section-number">8.3.4</span> List your Google Analytics accounts and properties</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="google-analytics.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">## get your accounts</span></span>
<span id="cb8-2"><a href="google-analytics.html#cb8-2" aria-hidden="true" tabindex="-1"></a>ga_accounts <span class="ot">&lt;-</span> <span class="fu">ga_account_list</span>()</span>
<span id="cb8-3"><a href="google-analytics.html#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="google-analytics.html#cb8-4" aria-hidden="true" tabindex="-1"></a>ga_accounts</span></code></pre></div>
</div>
<div id="obtain-viewid-associated-with-your-website" class="section level3" number="8.3.5">
<h3><span class="header-section-number">8.3.5</span> Obtain viewId associated with your website</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="google-analytics.html#cb9-1" aria-hidden="true" tabindex="-1"></a>view_id <span class="ot">&lt;-</span> ga_accounts <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="google-analytics.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(accountName <span class="sc">==</span> <span class="st">&quot;abndistro&quot;</span>, webPropertyName <span class="sc">==</span> <span class="st">&quot;Abnormal Distributions&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="google-analytics.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(viewId)</span></code></pre></div>
</div>
<div id="daily-count-of-website-users" class="section level3" number="8.3.6">
<h3><span class="header-section-number">8.3.6</span> Daily count of website users</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="google-analytics.html#cb10-1" aria-hidden="true" tabindex="-1"></a>daily_users <span class="ot">&lt;-</span> <span class="fu">google_analytics</span>(</span>
<span id="cb10-2"><a href="google-analytics.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">viewId =</span> view_id,</span>
<span id="cb10-3"><a href="google-analytics.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">date_range =</span> <span class="fu">c</span>(<span class="st">&quot;2019-01-01&quot;</span>, <span class="st">&quot;2020-12-31&quot;</span>),</span>
<span id="cb10-4"><a href="google-analytics.html#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="st">&quot;users&quot;</span>,</span>
<span id="cb10-5"><a href="google-analytics.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dimensions =</span> <span class="st">&quot;date&quot;</span></span>
<span id="cb10-6"><a href="google-analytics.html#cb10-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="google-analytics.html#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb10-8"><a href="google-analytics.html#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="google-analytics.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb10-10"><a href="google-analytics.html#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> daily_users,</span>
<span id="cb10-11"><a href="google-analytics.html#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>date,</span>
<span id="cb10-12"><a href="google-analytics.html#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>users,</span>
<span id="cb10-13"><a href="google-analytics.html#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;lines&quot;</span></span>
<span id="cb10-14"><a href="google-analytics.html#cb10-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb10-15"><a href="google-analytics.html#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&quot;Daily count of users who engaged with Abnormal Distributions&quot;</span>)</span></code></pre></div>
</div>
<div id="users-by-device-type" class="section level3" number="8.3.7">
<h3><span class="header-section-number">8.3.7</span> Users by device type</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="google-analytics.html#cb11-1" aria-hidden="true" tabindex="-1"></a>users_by_device_type <span class="ot">&lt;-</span> <span class="fu">google_analytics</span>(</span>
<span id="cb11-2"><a href="google-analytics.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">viewId =</span> view_id,</span>
<span id="cb11-3"><a href="google-analytics.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">date_range =</span> <span class="fu">c</span>(<span class="st">&quot;2019-01-01&quot;</span>, <span class="st">&quot;2020-12-31&quot;</span>),</span>
<span id="cb11-4"><a href="google-analytics.html#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="st">&quot;users&quot;</span>,</span>
<span id="cb11-5"><a href="google-analytics.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dimensions =</span> <span class="st">&quot;deviceCategory&quot;</span></span>
<span id="cb11-6"><a href="google-analytics.html#cb11-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="google-analytics.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb11-8"><a href="google-analytics.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="google-analytics.html#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(</span>
<span id="cb11-10"><a href="google-analytics.html#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> users_by_device_type,</span>
<span id="cb11-11"><a href="google-analytics.html#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>deviceCategory,</span>
<span id="cb11-12"><a href="google-analytics.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>users,</span>
<span id="cb11-13"><a href="google-analytics.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">&quot;bar&quot;</span></span>
<span id="cb11-14"><a href="google-analytics.html#cb11-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="google-analytics.html#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">&quot;Users by device type&quot;</span>)</span></code></pre></div>
</div>
<div id="page-views-by-page" class="section level3" number="8.3.8">
<h3><span class="header-section-number">8.3.8</span> Page views by page</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="google-analytics.html#cb12-1" aria-hidden="true" tabindex="-1"></a>page_views <span class="ot">&lt;-</span> <span class="fu">google_analytics</span>(</span>
<span id="cb12-2"><a href="google-analytics.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">viewId =</span> view_id,</span>
<span id="cb12-3"><a href="google-analytics.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">date_range =</span> <span class="fu">c</span>(<span class="st">&quot;2019-01-01&quot;</span>, <span class="st">&quot;2020-12-31&quot;</span>),</span>
<span id="cb12-4"><a href="google-analytics.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="st">&quot;pageviews&quot;</span>,</span>
<span id="cb12-5"><a href="google-analytics.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dimensions =</span> <span class="st">&quot;pageTitle&quot;</span></span>
<span id="cb12-6"><a href="google-analytics.html#cb12-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="google-analytics.html#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span>
<span id="cb12-8"><a href="google-analytics.html#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="google-analytics.html#cb12-9" aria-hidden="true" tabindex="-1"></a>page_views <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="google-analytics.html#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pageviews)) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="google-analytics.html#cb12-11" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">datatable</span>()</span></code></pre></div>
</div>
<div id="users-by-location" class="section level3" number="8.3.9">
<h3><span class="header-section-number">8.3.9</span> Users by location</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="google-analytics.html#cb13-1" aria-hidden="true" tabindex="-1"></a>users_location <span class="ot">&lt;-</span> <span class="fu">google_analytics</span>(</span>
<span id="cb13-2"><a href="google-analytics.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">viewId =</span> view_id,</span>
<span id="cb13-3"><a href="google-analytics.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">date_range =</span> <span class="fu">c</span>(<span class="st">&quot;2019-01-01&quot;</span>, <span class="st">&quot;2020-12-31&quot;</span>),</span>
<span id="cb13-4"><a href="google-analytics.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="st">&quot;users&quot;</span>,</span>
<span id="cb13-5"><a href="google-analytics.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">dimensions =</span> <span class="fu">c</span>(<span class="st">&quot;latitude&quot;</span>, <span class="st">&quot;longitude&quot;</span>),</span>
<span id="cb13-6"><a href="google-analytics.html#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">anti_sample =</span> T</span>
<span id="cb13-7"><a href="google-analytics.html#cb13-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb13-8"><a href="google-analytics.html#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-9"><a href="google-analytics.html#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_at</span>(<span class="fu">vars</span>(latitude, longitude), <span class="fu">list</span>(as.numeric))</span>
<span id="cb13-10"><a href="google-analytics.html#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="google-analytics.html#cb13-11" aria-hidden="true" tabindex="-1"></a>users_location <span class="sc">%&gt;%</span></span>
<span id="cb13-12"><a href="google-analytics.html#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb13-13"><a href="google-analytics.html#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="google-analytics.html#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addCircleMarkers</span>(</span>
<span id="cb13-15"><a href="google-analytics.html#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">lng =</span> <span class="sc">~</span>longitude,</span>
<span id="cb13-16"><a href="google-analytics.html#cb13-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">lat =</span> <span class="sc">~</span>latitude,</span>
<span id="cb13-17"><a href="google-analytics.html#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">radius =</span> <span class="sc">~</span><span class="fu">log</span>(users),</span>
<span id="cb13-18"><a href="google-analytics.html#cb13-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">stroke =</span> <span class="cn">FALSE</span>, </span>
<span id="cb13-19"><a href="google-analytics.html#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">fillOpacity =</span> <span class="fl">0.5</span></span>
<span id="cb13-20"><a href="google-analytics.html#cb13-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="deploy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extras.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
